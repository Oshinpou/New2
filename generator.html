<!DOCTYPE html>
<html>
<head>
  <title>Cloud Web Page Generator</title>
  <style>
    body { font-family: Arial, sans-serif; }
    .container { width: 80%; margin: auto; padding: 20px; }
    .input-group { margin-bottom: 10px; }
    .input-group label { display: block; }
    .button { padding: 10px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
    .button:hover { background-color: #45a049; }
    .link-list { margin-top: 20px; }
    .link-item { margin-bottom: 10px; }
    .delete-btn { margin-left: 10px; padding: 5px; background-color: #f44336; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Cloud Web Page Generator</h1>
    <div class="input-group">
      <label for="productName">Product Name:</label>
      <input type="text" id="productName" placeholder="Enter product name">
    </div>
    <div class="input-group">
      <label for="productPrice">Product Price (INR):</label>
      <input type="number" id="productPrice" placeholder="Enter product price">
    </div>
    <button class="button" onclick="generatePage()">Generate Page</button>

    <div class="link-list" id="linkList">
      <h2>Generated Links</h2>
      <!-- Links will be populated here -->
    </div>
  </div>

  <!-- Script to handle page generation and storage -->
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
  <script>
    const gun = Gun();
    const linkList = document.getElementById('linkList');

    function generateToken() {
      return Math.random().toString(36).substr(2, 9);
    }

    function generatePage() {
      const productName = document.getElementById('productName').value;
      const productPrice = document.getElementById('productPrice').value;

      if (productName && productPrice) {
        const token = generateToken();
        const productData = {
          name: productName,
          price: productPrice
        };

        // Store the product data in GunDB
        gun.get('products').get(token).put(productData);

        // Display the link
        displayLink(token, productData);
      } else {
        alert('Please enter both product name and price.');
      }
    }

    function displayLink(token, productData) {
      const linkItem = document.createElement('div');
      linkItem.className = 'link-item';
      linkItem.innerHTML = `
        <a href="cloud.html#${token}" target="_blank">View ${productData.name} - INR ${productData.price}</a>
        <button class="delete-btn" onclick="deleteLink('${token}', this)">Delete</button>
      `;
      linkList.appendChild(linkItem);
    }

    function deleteLink(token, buttonElement) {
      // Delete the product data from GunDB
      gun.get('products').get(token).put(null);

      // Remove the link from the display
      buttonElement.parentElement.remove();
    }

    // Load existing links from GunDB
    gun.get('products').map().on((productData, token) => {
      if (productData) {
        displayLink(token, productData);
      }
    });
  </script>
</body>
</html>
