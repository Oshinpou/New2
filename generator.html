<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Page Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
</head>
<body class="bg-gray-100 p-6 font-sans">
  <div class="max-w-xl mx-auto bg-white p-6 rounded shadow">
    <h1 class="text-2xl font-bold mb-4">Generate Digital Cloud Page</h1>

    <input id="name" placeholder="Product Name" class="w-full p-2 mb-2 border rounded" />
    <input id="price" placeholder="Product Price" class="w-full p-2 mb-2 border rounded" />
    <textarea id="description" placeholder="Description" class="w-full p-2 mb-4 border rounded"></textarea>

    <button onclick="createPage()" class="bg-blue-600 text-white px-4 py-2 rounded">Create Page</button>

    <h2 class="text-xl font-semibold mt-6 mb-2">Generated Links</h2>
    <ul id="links" class="space-y-2"></ul>
  </div>

  <script>
    const gun = Gun();
    const linkList = document.getElementById('links');

    function createPage() {
      const name = document.getElementById('name').value.trim();
      const price = document.getElementById('price').value.trim();
      const description = document.getElementById('description').value.trim();

      if (!name || !price || !description) {
        alert("Please fill in all fields.");
        return;
      }

      const id = 'page_' + Date.now();
      const data = { name, price, description, id };

      gun.get('pages').get(id).put(data);
      renderLink(data);
    }

    function renderLink(data) {
      const li = document.createElement('li');
      li.className = "bg-gray-200 p-2 rounded flex justify-between items-center";
      li.innerHTML = `
        <div>
          <a href="page.html?id=${data.id}" target="_blank" class="text-blue-700 underline">${data.name}</a>
          <div class="text-sm text-gray-600">â‚¹${data.price}</div>
        </div>
        <button class="text-red-500" onclick="deletePage('${data.id}', this)">Delete</button>
      `;
      linkList.prepend(li);
    }

    function deletePage(id, btn) {
      gun.get('pages').get(id).put(null);
      btn.parentElement.remove();
    }

    // Load existing
    gun.get('pages').map().once((data, id) => {
      if (data && data.name) renderLink(data);
    });
  </script>
</body>
</html>
