<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Generated Page</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  nav { background: #eee; padding: 10px; margin-bottom: 20px; }
  #slider { display: flex; overflow-x: auto; gap: 10px; margin-bottom: 20px; }
  #slider img, #slider video { max-height: 200px; }
  #product { margin-top: 20px; }
</style>
</head>
<body>

<div id="content"></div>

<script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
<script>
const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get('id');
const gun = Gun();

if(!id) {
  document.body.innerHTML = 'Invalid page.';
} else {
  gun.get('pages').get(id).once(data => {
    if(!data) {
      document.body.innerHTML = 'Page not found.';
      return;
    }
    // Build nav
    document.getElementById('content').innerHTML = `
      <nav>
        <img src="${data.logo}" alt="Logo" width="50" />
        <a href="${data.accountLink}">Account</a>
        <a href="${data.homeLink}">Home</a>
        <a href="${data.basketLink}">Basket</a>
      </nav>
      
      <div id="slider"></div>
      
      <div id="product">
        <h2>${data.productName}</h2>
        <p>Category: ${data.category}</p>
        <p>Subcategory: ${data.subcategory}</p>
        <p>Variants: ${data.variantsOptions}</p>
        <button id="addToBasket">Add to Basket</button>
      </div>
    `;
    
    // Populate slider
    const sliderDiv = document.getElementById('slider');
    data.sliderItems.forEach(item => {
      if(item.type === 'image') {
        sliderDiv.innerHTML += `<img src="${item.src}">`;
      } else if(item.type === 'video') {
        sliderDiv.innerHTML += `<video src="${item.src}" controls></video>`;
      }
    });
    
    // Handle add to basket (simple example)
    document.getElementById('addToBasket').onclick = () => {
      alert('Added to basket! (Implement basket storage)');
    };
  });
}
</script>

</body>
</html>
