<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Page Generator & Link Manager</title>
<script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  button { margin: 5px; padding: 8px 12px; }
  #linksContainer { margin-top: 20px; }
</style>
</head>
<body>

<h1>Page Generator & Link Manager</h1>

<!-- Form to create a new page -->
<h2>Create New Page</h2>
<button id="createPageBtn">Create Sample Page</button>

<!-- Container for generated links -->
<h2>Generated Links</h2>
<div id="linksContainer"></div>

<!-- Container for delete buttons -->
<h2>Manage Pages</h2>
<div id="deleteButtons"></div>

<script>
const gun = Gun();

// Function to create a sample page data
function createSamplePage() {
  const pageId = Date.now(); // Unique ID
  const data = {
    logo: 'imacxstarone.png',
    accountLink: '#account',
    homeLink: '#home',
    basketLink: '#basket',
    sliderItems: [
      { type: 'image', src: 'https://via.placeholder.com/600x300?text=Slide1' },
      { type: 'video', src: 'https://www.w3schools.com/html/mov_bbb.mp4' }
    ],
    productName: 'Sample Product',
    category: 'digital',
    subcategory: 'gadgets',
    variantsOptions: 'Size,Color',
    variants: [
      { size: 'S,M,L', color: 'Red,Blue', price: 100, discount: 80 },
      { size: 'XL,XXL', color: 'Green,Black', price: 150, discount: 120 }
    ],
    price: 100,
  };
  // Save page data
  gun.get('pages').get(pageId).put(data);
  // Generate link
  const link = `${window.location.origin}${window.location.pathname}?id=${pageId}`;
  // Store link info
  gun.get('links').set({ id: pageId, link });
  // Create delete button
  addDeleteButton(pageId);
  // Refresh links list
  loadLinks();
}

// Function to add delete button for a page
function addDeleteButton(pageId) {
  const btn = document.createElement('button');
  btn.textContent = `Delete Page ${pageId}`;
  btn.onclick = () => {
    gun.get('pages').get(pageId).put(null);
    // Remove from links list
    loadLinks();
  };
  document.getElementById('deleteButtons').appendChild(btn);
}

// Load all links and delete buttons
function loadLinks() {
  document.getElementById('linksContainer').innerHTML = '';
  document.getElementById('deleteButtons').innerHTML = '';
  gun.get('links').map().once(linkData => {
    if(linkData && linkData.link) {
      // Create link element
      const a = document.createElement('a');
      a.href = linkData.link;
      a.textContent = linkData.link;
      a.target = '_blank';
      document.getElementById('linksContainer').appendChild(a);
      // Add delete button
      addDeleteButton(linkData.id);
    }
  });
}

// Event listener for creating a page
document.getElementById('createPageBtn').onclick = createSamplePage;

// Initial load
loadLinks();
</script>

</body>
</html>
          
